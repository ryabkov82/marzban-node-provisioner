# =========================
# Panel API (для скрипта и плейбуков)
# =========================
PANEL_URL=https://your-panel.example.com:4443
PANEL_USERNAME=admin
PANEL_PASSWORD=change_me
# Для ansible/playbooks: передаётся как panel_validate_certs
PANEL_VERIFY_TLS=true

# =========================
# Инвентарь Ansible / Makefile
# =========================
# Инвентарь по умолчанию для целей make
INV=ansible/inventories/prod.ini
# (необяз.) Лимит хоста/группы для make: LIMIT=nl-ams-3
# LIMIT=
# (необяз.) Доп. флаги к ansible-playbook, например -vvv
# EXTRA=

# =========================
# SSH / целевой узел (для scripts/add-node.sh)
# =========================
# Формат SSH_TARGET: либо "user@host", либо просто "host" + SSH_USER
SSH_TARGET=nl-ams-3
SSH_USER=root
SSH_KEY=~/.ssh/ds_ansible
# Опции SSH для скрипта (BatchMode + ключ + таймаут + принятие ключа хоста)
SSH_OPTS="-o BatchMode=yes -o StrictHostKeyChecking=accept-new -o ConnectTimeout=10 -i ${SSH_KEY}"

# =========================
# Параметры узла и регистрации в панели (скрипт)
# =========================
SERVICE_PORT=62050
API_PORT=62051
ADD_AS_NEW_HOST=true
USAGE_COEFF=1.0

# =========================
# Управляющие флаги скрипта
# =========================
SKIP_UPGRADE=false
SKIP_DOCKER=false
SKIP_REGISTER=false
DEBUG=0

# =========================
# TLS sync с cert-master (вариант БЕЗ rsync — tar|ssh)
# =========================
# Включить шаг синхронизации сертификата
CERT_SYNC_ENABLE=true
# Домен wildcard-сертификата
CERT_DOMAIN=digitalstreamers.xyz
# Хост/алиас cert-master (откуда читаем /etc/letsencrypt/live/<domain>/)
CERT_MASTER=nl-ams-master
# Пользователь на cert-master (обычно root)
CERT_MASTER_USER=root
# Ключ ДЛЯ доступа на cert-master (с вашей локальной машины)
CERT_MASTER_SSH_KEY=~/.ssh/cert_master

# (необяз.) Явно указать целевой хост для копирования;
# если не задано — берётся host из SSH_TARGET
# CERT_TARGET_HOST=45.142.164.36

# (необяз.) Куда класть на target (по умолчанию путь Let's Encrypt)
# CERT_DEST_DIR=/etc/letsencrypt/live/${CERT_DOMAIN}

# Какие сервисы мягко перезагружать после обновления cert’а
RELOAD_SERVICES="nginx haproxy"

# =========================
# Проверка сертификата на целевом сервере (скрипт)
# =========================
# Включить проверку (subject/issuer/dates) после синхронизации
CERT_VERIFY=true
# Строгая проверка соответствия CN/SAN домену (опционально)
STRICT_CERT_CHECK=false
# (необяз.) Явный путь к сертификату nginx, если нестандартный
# NGINX_SSL_CERT=/etc/letsencrypt/live/${CERT_DOMAIN}/fullchain.pem
